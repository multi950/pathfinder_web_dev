<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="../css/general_style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    
</head>

<body>
    <div class="content">
        <form id="loginForm" action="/login" method="post">
            <input type="email" placeholder="Email" id="email" name="email"><br>
            <input type="password" placeholder="Password" id="password" name="password"><br>
            <input type="submit" value="Log in"></b>
        </form>
    </div>

    <div class="content">
        <form id="testForm" action="/characters" method="get">
            <input type="submit" value="test"></b>
        </form>
    </div>

    <script type="module">
    import { handleForm } from "../javascript/ajax/forms.js";
    
    handleForm("loginForm", function(response){
        if(response.success == 1){
            document.cookie = ("authorization="+response.token);
            console.log("correct email and pass");
            console.log(document.cookie);
            
        } else {
            console.log("incorrect email or pass")
        }
    });    
    
    handleForm("testForm", function(response){
        var responseData = response.result;
        if(response.success == 1){
            console.log("success");
            console.log("ID = "+responseData[0].id);

        } else {
            console.log("insuccess")
        }
    });
 </script>




</body>

</html>